## 特点
### 数据完整性
- Git 中所有数据在存储前都计算校验和，然后以校验和来引用。 这意味着不可能在 Git 不知情时更改任何文件内容或目录内容。 这个功能建构在 Git 底层，是构成 Git 哲学不可或缺的部分。 若你在传送过程中丢失信息或损坏文件，Git 就能发现
- Git 用以计算校验和的机制叫做 SHA-1 散列（hash，哈希）。 这是一个由 40 个十六进制字符（0-9 和 a-f）组成字符串，基于 Git 中文件的内容或目录结构计算出来
  - 一个哈希算法，加密结果长度固定
  - 输入数据确定，结果也确定
  - 输入数据有变，结果一定变化
- 实际上，Git 数据库中保存的信息都是以文件内容的哈希值来索引，而不是文件名
  - 二者一一对应，是键值对的关系
  - 当有多个文件内容相同时（名字可以不同），git也只会保存一个副本在objects文件夹里
### 文件的三种状态
- Git 有三种状态，你的文件可能处于其中之一：已提交（committed）、已修改（modified）和已暂存（staged）
1. 已提交表示数据已经安全的保存在本地数据库中 
1. 已修改表示修改了文件，但还没保存到数据库中
1. 已暂存表示对一个已修改文件的当前版本做了标记，使之包含在下次提交的快照中

![](../images/git_lifecycle.png)
### 三种工作区域
- Git 仓库、工作目录以及暂存区域
1. Git 仓库目录是 Git 用来保存项目的元数据和对象数据库的地方。 这是 Git 中最重要的部分，从其它计算机克隆仓库时，拷贝的就是这里的数据
1. 工作目录是对项目的某个版本独立提取出来的内容。 这些从 Git 仓库的压缩数据库中提取出来的文件，放在磁盘上供你使用或修改
   - 也就是你当前操作的目录，对其修改具有一定的危险性，可能会导致进度丢失
2. 暂存区域是一个文件，保存了下次将提交的文件列表信息，一般在 Git 仓库目录中。 有时候也被称作索引，不过一般说法还是叫暂存区域
   - 暂存区相当于一个缓冲区，你可以随意对其更改而不会有危险

![](../images/git_areas.png)
### 基本工作流程
1. 在工作目录中修改文件
1. 暂存文件，将文件的快照放入暂存区域
1. 提交更新，找到暂存区域的文件，将快照永久性存储到 Git 仓库目录

## git object
- blob，用压缩方式存储文件的具体内容
  - 每次有文件进入暂存区都会生成对应的blob，同时把暂存区的引用指向新的blob
- tree，存储文件的目录结构、权限、文件名
  - 每次commit之后生成，会把当前暂存区的tree直接复制到仓库里
- commit，上一个commit、对应快照、作者、提交信息
  - commit类型有两个指针，一个指向上次的commit，一个指向当前tree类型
  - 每次commit之后生成，会指向新生成的tree
- 一次完整的提交过程
  - edit->add->自动生成并指向blob->commit->自动把暂存区的tree复制到仓库->自动在仓库生成一个commit文件并指向该tree->自动将暂存区的tree指向仓库的tree